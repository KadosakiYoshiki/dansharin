<div class="row">
  <div class="col-md-4">
    <div class="d-flex justify-content-between">
      <div>
        <% if @user.profile_image.attached? && @user.profile_image_exists? %>
          <%= image_tag @user.image_url(:ogp), class: "img-thumbnail img-responsive" %>
        <% else %>
          <i class="bi-person-fill img-thumbnail img-responsive" style="font-size: 2rem; color: cornflowerblue;"　></i>
        <% end %>
      </div>
      <div class="d-flex align-items-end">
        <% if current_user == @user %>
          <%= link_to edit_user_path(current_user.username), class: "btn btn-success" do %>
            <i class="bi-pencil"></i> 編集
          <% end %>
        <% else %>
        <% end %>
      </div>
    </div>
    <div>
      <span class="fw-bold"><%= @user.nickname %></span>
    </div>
    <div>
      @<%= @user.username %>
    </div>
    <div>
      <%= User.human_attribute_name(:description) %>
      <%= simple_format @user.description %>
    </div>
  </div>
  <div class="col-md-8">
    <% @posts.each do |post| %>
      <div class="border mb-2 p-1">
        <div class="d-flex">
          <div class="flex-shrink-1 me-1" style="width: 70px; height: 70px;">
            <% if @user.profile_image.attached? && @user.profile_image_exists? %>
              <%= image_tag @user.image_url(:ogp), class: "img-thumbnail img-responsive" %>
            <% else %>
              <i class="bi-person-fill img-thumbnail img-responsive" style="font-size: 2rem; color: cornflowerblue;" class=""></i>
            <% end %>
          </div>
          <div class="w-100">
            <div class="d-flex justify-content-between">
              <div class="d-flex justify-content-start">
                <div class="me-1">
                  <span class="fw-bold"><%= @user.nickname %></span>
                </div>
                <div class="me-1">
                  <%= '@' + @user.username %>
                </div>
                <div class="me-1">
                  ・ <i class="bi-alarm"></i> <%= time_ago_in_words(post.created_at) %>
                </div>
              </div>
              <% if current_user == @user %>
                <div class="me-1">
                  <a href="#" id="post_<%= post.id %>" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi-three-dots" style="color: gray;"></i> 
                  </a>
                  <div class="dropdown-menu" aria-labelledby="post_<%= post.id %>">
                    <%= button_to "投稿を削除", post_path(post, path: request.fullpath), method: :delete, data: { turbo_confirm: '削除しますか？' }, class: "dropdown-item" %>
                  </div>
                </div>
              <% end %>
            </div>
            <div><%= simple_format post.content %></div>
            <% if post.post_images.attached? %>
              <div>
                <% post.post_images.each do |image| %>
                  <%= image_tag image.variant(resize: 0.3) %>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
